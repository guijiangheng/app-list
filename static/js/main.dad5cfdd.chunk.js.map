{"version":3,"sources":["actions.js","components/AppItem.js","components/AppList.js","components/App.js","reducers.js","store.js","index.js"],"names":["ActionType","SET_FILTER","Symbol","REQUEST_TOP_FREE_APPS","RECEIVE_TOP_FREE_APPS","REQUEST_TOP_GROSSING_APPS","RECEIVE_TOP_GROSSING_APPS","fetchTopFreeApps","dispatch","type","fetch","then","res","json","receiveTopFreeApps","fetchtopGrossingApps","receiveTopGrossingApps","AppItem","_ref","horizontal","index","title","category","icon","react_default","a","createElement","className","src","alt","width","height","getAppInfo","item","label","attributes","AppList","items","map","AppItem_AppItem","Object","assign","key","App","handleChange","event","filter","_this","props","target","value","this","_this$props","topFreeApps","topGrossingApps","onChange","placeholder","AppList_AppList","Component","filterApp","app","info","indexOf","connect","state","loading","combineReducers","arguments","length","undefined","action","objectSpread","feed","entry","createStore","rootReducer","applyMiddleware","thunkMiddleware","ReactDOM","render","es","store","src_components_App","document","getElementById"],"mappings":"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","file":"static/js/main.dad5cfdd.chunk.js","sourcesContent":["export const ActionType = {\n  SET_FILTER: Symbol('SET_FILTER'),\n  REQUEST_TOP_FREE_APPS: Symbol('REQUEST_TOP_FREE_APPS'),\n  RECEIVE_TOP_FREE_APPS: Symbol('RECEIVE_TOP_FREE_APPS'),\n  REQUEST_TOP_GROSSING_APPS: Symbol('REQUEST_TOP_GROSSING_APPS'),\n  RECEIVE_TOP_GROSSING_APPS: Symbol('RECEIVE_TOP_GROSSING_APPS')\n};\n\nexport function filterBy(filter) {\n  return {\n    type: ActionType.SET_FILTER,\n    filter: filter\n  };\n}\n\nexport function requestTopFreeApps() {\n  return {\n    type: ActionType.REQUEST_TOP_FREE_APPS\n  };\n}\n\nexport function receiveTopFreeApps(json) {\n  return {\n    type: ActionType.RECEIVE_TOP_FREE_APPS,\n    json\n  };\n}\n\nexport function fetchTopFreeApps() {\n  return dispatch => {\n    dispatch(requestTopFreeApps());\n    return fetch('http://itunes.apple.com/hk/rss/topfreeapplications/limit=100/json')\n      .then(res => res.json())\n      .then(json => dispatch(receiveTopFreeApps(json)));\n  }\n}\n\nexport function requestTopGrossingApps() {\n  return {\n    type: ActionType.REQUEST_TOP_GROSSING_APPS\n  };\n}\n\n\nexport function receiveTopGrossingApps(json) {\n  return {\n    type: ActionType.RECEIVE_TOP_GROSSING_APPS,\n    json\n  };\n}\n\nexport function fetchtopGrossingApps() {\n  return dispatch => {\n    dispatch(requestTopGrossingApps());\n    return fetch('https://itunes.apple.com/hk/rss/topgrossingapplications/limit=10/json')\n      .then(res => res.json())\n      .then(json => dispatch(receiveTopGrossingApps(json)));\n  }\n}\n","import React from 'react';\nimport './AppItem.css';\n\nexport default function AppItem({ horizontal, index, title, category, icon }) {\n  return (\n    <div className=\"appitem\">\n      {horizontal ? null : <div className=\"appitem__index\">{index}</div>}\n      <div className=\"appitem__icon\">\n        <img\n          className=\"appitem__img\"\n          src={icon}\n          alt={title}\n          width=\"100\"\n          height=\"100\"\n        />\n      </div>\n      <div className=\"appitem__info\">\n        <div className=\"appitem__title\">{title}</div>\n        <div className=\"appitem__category\">{category}</div>\n      </div>\n    </div>\n  );\n}\n","import React from 'react';\nimport AppItem from './AppItem';\nimport './AppList.css';\n\nexport function getAppInfo(item) {\n  return {\n    title: item['im:name'].label,\n    icon: item['im:image'][2].label,\n    category: item.category.attributes.label,\n  };\n}\n\nexport default function AppList({ items, horizontal }) {\n  return (\n    <div className={horizontal ? 'applist--horizontal' : 'applist'}>\n      {items.map((item, index) =>\n        <AppItem\n          horizontal={horizontal}\n          key={index}\n          index={index + 1}\n          {...getAppInfo(item)}\n        />\n      )}\n    </div>\n  );\n}\n","import React, { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { fetchTopFreeApps, fetchtopGrossingApps, filterBy } from '../actions';\nimport AppList, { getAppInfo } from './AppList';\nimport './App.css';\n\nclass App extends Component {\n  componentDidMount() {\n    const { dispatch } = this.props;\n    dispatch(fetchTopFreeApps());\n    dispatch(fetchtopGrossingApps());\n  }\n\n  handleChange = event => {\n    const { dispatch } = this.props;\n    dispatch(filterBy(event.target.value));\n  }\n\n  render() {\n    const { filter, topFreeApps, topGrossingApps } = this.props;\n    return (\n      <div className=\"app\">\n        <div className=\"app__search\">\n          <input\n            className=\"app__search-input\"\n            value={filter}\n            onChange={this.handleChange}\n            placeholder=\"搜索\"\n          />\n        </div>\n        <AppList {...topGrossingApps} horizontal/>\n        <AppList {...topFreeApps} />\n      </div>\n    );\n  }\n}\n\nfunction filterApp(app, filter) {\n  const info = getAppInfo(app);\n  if (info.title.indexOf(filter) !== -1) return true;\n  if (info.category.indexOf(filter) !== -1) return true;\n  return false;\n}\n\nexport default connect(\n  state => {\n    const { filter, topFreeApps, topGrossingApps } = state;\n    return {\n      filter,\n      topFreeApps: {\n        loading: topFreeApps.loading,\n        items: topFreeApps.items.filter(app => filterApp(app, filter))\n      },\n      topGrossingApps: {\n        loading: topGrossingApps.loading,\n        items: topGrossingApps.items.filter(app => filterApp(app, filter))\n      }\n    }\n  }\n)(App);\n","import { combineReducers } from 'redux';\nimport { ActionType } from './actions';\n\nfunction filter(state = '', action) {\n  switch (action.type) {\n    case ActionType.SET_FILTER:\n      return action.filter;\n    default:\n      return state;\n  }\n}\n\nfunction topFreeApps(\n  state = {\n    loading: false,\n    items: []\n  },\n  action\n) {\n  switch (action.type) {\n    case ActionType.REQUEST_TOP_FREE_APPS:\n      return {\n        ...state,\n        loading: true\n      };\n    case ActionType.RECEIVE_TOP_FREE_APPS:\n      return {\n        loading: false,\n        items: action.json.feed.entry\n      };\n    default:\n      return state;\n  }\n}\n\nfunction topGrossingApps(\n  state = {\n    loading: false,\n    items: []\n  },\n  action\n) {\n  switch (action.type) {\n    case ActionType.REQUEST_TOP_GROSSING_APPS:\n      return {\n        loading: false,\n        ...state\n      };\n    case ActionType.RECEIVE_TOP_GROSSING_APPS:\n      return {\n        loading: false,\n        items: action.json.feed.entry\n      };\n    default:\n      return state;\n  }\n}\n\nexport default combineReducers({\n  filter,\n  topFreeApps,\n  topGrossingApps\n});\n","import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport rootReducer from './reducers';\n\nexport default createStore(rootReducer, applyMiddleware(thunkMiddleware));\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './components/App';\nimport { Provider } from 'react-redux';\nimport store from './store';\nimport './index.css';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}